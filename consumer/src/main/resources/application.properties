spring.application.name=ribbon-consumer
server.port=3333

eureka.client.service-url.defaultZone=http://user:admin@localhost:1111/eureka/
eureka.instance.prefer-ip-address=true
#不知道这个配置是否有用
eureka.client.healthcheck=true
eureka.client.registry-fetch-interval-seconds=20

#spring.zipkin.sender.type=rabbit
#spring.rabbitmq.host=172.30.3.108
#spring.rabbitmq.password=springcloud
#spring.rabbitmq.username=springcloud

spring.sleuth.sampler.probability=1
spring.sleuth.web.client.enabled=true
spring.zipkin.base-url=http://172.30.3.108:9411/

#Ribbon配置
#开启重试
spring.cloud.loadbalancer.retry.enabled=true
ribbon.ConnectTimeout=200
ribbon.ReadTimeout=2000
#所有请求都允许重试
ribbon.OkToRetryOnAllOperations=true
#最多切换1次
ribbon.MaxAutoRetriesNextServer=1
#每个实例失败后，可以再试一次
ribbon.MaxAutoRetries=1
#以上配置表示最多可以发起(MaxAutoRetriesNextServer+1)*(MaxAutoRetries+1)次调用

# 实现自己的选择器
hello-service.ribbon.NFLoadBalancerRuleClassName=com.netflix.loadbalancer.BestAvailableRule

# 5s 后标记为超时进入fallback，应该超过前面ribbon的超时时间，
# default可以替换成feign客户端的方法名，指定具体服务配置
# 重载方法会共用配置
hystrix.command.default.execution.isolation.thread.timeInMilliseconds=9000
#hystrix.command.hello.execution.isolation.thread.timeInMilliseconds=50

#feign.compression.request.enabled=true

logging.level.com.linxingwu.consumer.service.ApiHelloService=debug

management.endpoints.web.exposure.include=*

#idea 错误，实际上这个配置是有用的，去掉会无法回退
feign.hystrix.enabled=true

#feign.client.config.default.connectTimeout=5000
